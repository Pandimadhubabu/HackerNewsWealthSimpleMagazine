{"ast":null,"code":"import _taggedTemplateLiteral from \"C:\\\\Projects\\\\WealthSimple\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"C:\\\\Projects\\\\WealthSimple\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Projects\\\\WealthSimple\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Projects\\\\WealthSimple\\\\src\\\\Components\\\\Stories\\\\InfiniteStories.js\";\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n    color: inherit;\\n    text-decoration: none;\\n  \"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n    width: calc(50% - 10px);\\n    position: absolute;\\n    top: 0px;\\n    left: 0px;\\n    background: #f2efeb;\\n    margin-bottom: 20px;\\n    position: relative;\\n    width: 100%;\\n  \"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n    position: relative;\\n    height: 1284px;\\n    margin: 40px auto 0;\\n    width: 100%;\\n  \"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    bottom: 0;\\n    left: 50%;\\n    margin-left: -90px;\\n    pointer-events: auto;\\n    position: absolute;\\n    width: 180px;\\n    font-family: FuturaBT-Book, sans-serif;\\n    font-size: 18px;\\n    font-weight: 300;\\n    background: #ffb21a;\\n    border-radius: 52px;\\n    color: #fff;\\n    padding: 16px 20px 15px;\\n    text-decoration: none;\\n    transition: background 80ms linear, opacity 1s linear;\\n    white-space: nowrap;\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    background: linear-gradient(hsla(0, 0%, 100%, 0), #f9f8f6);\\n    height: 390px;\\n    margin-top: -370px;\\n    pointer-events: none;\\n    position: relative;\\n    text-align: center;\\n    z-index: 2;\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\"; // import urlMetadata from \"url-metadata\";\n\nvar InfiniteStories = function InfiniteStories(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      ids = _useState2[0],\n      setIds = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      stories = _useState4[0],\n      setStories = _useState4[1]; //   const [visible, setVisible] = useState([]);\n\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loadMore = _useState6[0],\n      setLoadMore = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      lastId = _useState8[0],\n      setLastId = _useState8[1];\n\n  useEffect(function () {\n    getStories();\n  }, []);\n\n  var getStories = function getStories() {\n    // const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\"https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\").then(function (res) {\n      return !res.ok ? res.json().then(function (e) {\n        return Promise.reject(e);\n      }) : res.json();\n    }).then(function (res) {\n      setIds(res);\n      return res;\n    }).then(function (ids) {\n      return ids.filter(function (id, index, arr) {\n        console.log(id, index, lastId, index <= lastId && index < lastId + 30);\n        return index <= lastId && index < lastId + 30;\n      }).map(function (id) {\n        return fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(id, \".json\")).then(function (res) {\n          return !res.ok ? res.json().then(function (e) {\n            return Promise.reject(e);\n          }) : res.json();\n        }).then(function (res) {\n          //   urlMetadata(proxyurl + res.url).then(\n          //     function(metadata) {\n          //       // success handler\n          //       console.log(\"Metada \", metadata[\"og:image\"]);\n          //       const story = { ...res, image: metadata[\"og:image\"] };\n          //       setStories(prevState => [...prevState, story]);\n          //     },\n          //     function(error) {\n          //       // failure handler\n          //       setStories(prevState => [...prevState, res]);\n          //     }\n          //   );\n          setStories(function (prevState) {\n            return [].concat(_toConsumableArray(prevState), [res]);\n          });\n        }).catch(console.log);\n      });\n    }).catch(console.log);\n  };\n\n  useEffect(function () {\n    //   setVisible(stories.slice(lastId, lastId + 30));\n    loadMore && setLastId(lastId + 30);\n    setLoadMore(false);\n  }, [loadMore]);\n  var LoadMoreDiv = styled.div(_templateObject());\n  var Button = styled.div(_templateObject2());\n  var UL = styled.ul(_templateObject3());\n  var LI = styled.li(_templateObject4());\n  var Anchor = styled.a(_templateObject5());\n  return React.createElement(\"section\", {\n    className: \"mt-24\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, stories.map(function (story, index) {\n    return React.createElement(UL, {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(LI, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Anchor, {\n      href: story.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"recent-post-image-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"1\",\n      src: \"https://s2.reutersmedia.net/resources/r/?m=02&d=20191013&t=2&i=1440326434&w=1200&r=LYNXMPEF9C0AH\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"post-excerpt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"post-excerpt-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, story.title), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"He never wanted to be a professional boxer, he wanted to be a substitute teacher. Until his father got sick. The money story of the legendary five-time world champion, Olympic gold medalist, and one of the greatest pound-for-pound fighters in history.\")))));\n  })), React.createElement(LoadMoreDiv, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, React.createElement(Button, {\n    href: \"#\",\n    \"data-category\": \"?category_id=money-diaries\",\n    onClick: function onClick() {\n      return setLoadMore(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, \"More posts\")));\n};\n\nexport default InfiniteStories;","map":{"version":3,"sources":["C:/Projects/WealthSimple/src/Components/Stories/InfiniteStories.js"],"names":["React","useState","useEffect","styled","InfiniteStories","props","ids","setIds","stories","setStories","loadMore","setLoadMore","lastId","setLastId","getStories","fetch","then","res","ok","json","e","Promise","reject","filter","id","index","arr","console","log","map","prevState","catch","LoadMoreDiv","div","Button","UL","ul","LI","li","Anchor","a","story","url","title"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n// import urlMetadata from \"url-metadata\";\r\n\r\nconst InfiniteStories = props => {\r\n  const [ids, setIds] = useState([]);\r\n  const [stories, setStories] = useState([]);\r\n  //   const [visible, setVisible] = useState([]);\r\n  const [loadMore, setLoadMore] = useState(false);\r\n  const [lastId, setLastId] = useState(0);\r\n\r\n  useEffect(() => {\r\n    getStories();\r\n  }, []);\r\n\r\n  const getStories = () => {\r\n    // const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\n    fetch(\"https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\")\r\n      .then(res => {\r\n        return !res.ok ? res.json().then(e => Promise.reject(e)) : res.json();\r\n      })\r\n      .then(res => {\r\n        setIds(res);\r\n        return res;\r\n      })\r\n      .then(ids =>\r\n        ids\r\n          .filter((id, index, arr) => {\r\n            console.log(\r\n              id,\r\n              index,\r\n              lastId,\r\n              index <= lastId && index < lastId + 30\r\n            );\r\n            return index <= lastId && index < lastId + 30;\r\n          })\r\n          .map(id =>\r\n            fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`)\r\n              .then(res => {\r\n                return !res.ok\r\n                  ? res.json().then(e => Promise.reject(e))\r\n                  : res.json();\r\n              })\r\n              .then(res => {\r\n                //   urlMetadata(proxyurl + res.url).then(\r\n                //     function(metadata) {\r\n                //       // success handler\r\n                //       console.log(\"Metada \", metadata[\"og:image\"]);\r\n                //       const story = { ...res, image: metadata[\"og:image\"] };\r\n                //       setStories(prevState => [...prevState, story]);\r\n                //     },\r\n                //     function(error) {\r\n                //       // failure handler\r\n                //       setStories(prevState => [...prevState, res]);\r\n                //     }\r\n                //   );\r\n                setStories(prevState => [...prevState, res]);\r\n              })\r\n              .catch(console.log)\r\n          )\r\n      )\r\n      .catch(console.log);\r\n  };\r\n\r\n  useEffect(() => {\r\n    //   setVisible(stories.slice(lastId, lastId + 30));\r\n    loadMore && setLastId(lastId + 30);\r\n    setLoadMore(false);\r\n  }, [loadMore]);\r\n\r\n  const LoadMoreDiv = styled.div`\r\n    background: linear-gradient(hsla(0, 0%, 100%, 0), #f9f8f6);\r\n    height: 390px;\r\n    margin-top: -370px;\r\n    pointer-events: none;\r\n    position: relative;\r\n    text-align: center;\r\n    z-index: 2;\r\n  `;\r\n\r\n  const Button = styled.div`\r\n    bottom: 0;\r\n    left: 50%;\r\n    margin-left: -90px;\r\n    pointer-events: auto;\r\n    position: absolute;\r\n    width: 180px;\r\n    font-family: FuturaBT-Book, sans-serif;\r\n    font-size: 18px;\r\n    font-weight: 300;\r\n    background: #ffb21a;\r\n    border-radius: 52px;\r\n    color: #fff;\r\n    padding: 16px 20px 15px;\r\n    text-decoration: none;\r\n    transition: background 80ms linear, opacity 1s linear;\r\n    white-space: nowrap;\r\n  `;\r\n\r\n  const UL = styled.ul`\r\n    position: relative;\r\n    height: 1284px;\r\n    margin: 40px auto 0;\r\n    width: 100%;\r\n  `;\r\n\r\n  const LI = styled.li`\r\n    width: calc(50% - 10px);\r\n    position: absolute;\r\n    top: 0px;\r\n    left: 0px;\r\n    background: #f2efeb;\r\n    margin-bottom: 20px;\r\n    position: relative;\r\n    width: 100%;\r\n  `;\r\n\r\n  const Anchor = styled.a`\r\n    color: inherit;\r\n    text-decoration: none;\r\n  `;\r\n  return (\r\n    <section className=\"mt-24\">\r\n      <div>\r\n        {stories.map((story, index) => (\r\n          <UL key={index}>\r\n            <LI>\r\n              <Anchor href={story.url}>\r\n                <div className=\"recent-post-image-container\">\r\n                  <img\r\n                    alt=\"1\"\r\n                    src=\"https://s2.reutersmedia.net/resources/r/?m=02&d=20191013&t=2&i=1440326434&w=1200&r=LYNXMPEF9C0AH\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"post-excerpt\">\r\n                  <h3 className=\"post-excerpt-title\">{story.title}</h3>\r\n                  <p>\r\n                    He never wanted to be a professional boxer, he wanted to be\r\n                    a substitute teacher. Until his father got sick. The money\r\n                    story of the legendary five-time world champion, Olympic\r\n                    gold medalist, and one of the greatest pound-for-pound\r\n                    fighters in history.\r\n                  </p>\r\n                </div>\r\n              </Anchor>\r\n            </LI>\r\n          </UL>\r\n        ))}\r\n      </div>\r\n      <LoadMoreDiv>\r\n        <Button\r\n          href=\"#\"\r\n          data-category=\"?category_id=money-diaries\"\r\n          onClick={() => setLoadMore(true)}\r\n        >\r\n          More posts\r\n        </Button>\r\n      </LoadMoreDiv>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default InfiniteStories;\r\n"]},"metadata":{},"sourceType":"module"}