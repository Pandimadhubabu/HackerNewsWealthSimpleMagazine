{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Projects\\\\WealthSimple\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Projects\\\\WealthSimple\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Projects\\\\WealthSimple\\\\src\\\\Components\\\\Stories\\\\InfiniteStories.js\";\nimport React, { useState, useEffect } from \"react\";\n\nvar InfiniteStories = function InfiniteStories(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      ids = _useState2[0],\n      setIds = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      stories = _useState4[0],\n      setStories = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loaded = _useState6[0],\n      setLoaded = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      visible = _useState8[0],\n      setVisible = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      loadMore = _useState10[0],\n      setLoadMore = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      lastId = _useState12[0],\n      setLastId = _useState12[1];\n\n  useEffect(function () {\n    getStories();\n  }, []);\n\n  var getStories = function getStories() {\n    fetch(\"https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\").then(function (res) {\n      return !res.ok ? res.json().then(function (e) {\n        return Promise.reject(e);\n      }) : res.json();\n    }).then(function (res) {\n      setIds(res);\n      return res;\n    }).then(function (ids) {\n      return ids.map(function (id) {\n        return fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(id, \".json\")).then(function (res) {\n          return !res.ok ? res.json().then(function (e) {\n            return Promise.reject(e);\n          }) : res.json();\n        }).then(function (res) {\n          setStories(function (prevState) {\n            return [].concat(_toConsumableArray(prevState), [res]);\n          });\n        }).catch(console.log);\n      });\n    }).catch(console.log);\n  };\n\n  console.log(\"Stories\", stories);\n  useEffect(function () {\n    setVisible(stories.slice(lastId, lastId + 30));\n    setLoadMore(false);\n    loadMore && lastId + 30;\n  }, [loadMore]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Hello\");\n};\n\nexport default InfiniteStories;","map":{"version":3,"sources":["C:/Projects/WealthSimple/src/Components/Stories/InfiniteStories.js"],"names":["React","useState","useEffect","InfiniteStories","props","ids","setIds","stories","setStories","loaded","setLoaded","visible","setVisible","loadMore","setLoadMore","lastId","setLastId","getStories","fetch","then","res","ok","json","e","Promise","reject","map","id","prevState","catch","console","log","slice"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK,EAAI;AAAA,kBACTH,QAAQ,CAAC,EAAD,CADC;AAAA;AAAA,MACxBI,GADwB;AAAA,MACnBC,MADmB;;AAAA,mBAEDL,QAAQ,CAAC,EAAD,CAFP;AAAA;AAAA,MAExBM,OAFwB;AAAA,MAEfC,UAFe;;AAAA,mBAGHP,QAAQ,CAAC,KAAD,CAHL;AAAA;AAAA,MAGxBQ,MAHwB;AAAA,MAGhBC,SAHgB;;AAAA,mBAIDT,QAAQ,CAAC,EAAD,CAJP;AAAA;AAAA,MAIxBU,OAJwB;AAAA,MAIfC,UAJe;;AAAA,mBAKCX,QAAQ,CAAC,KAAD,CALT;AAAA;AAAA,MAKxBY,QALwB;AAAA,MAKdC,WALc;;AAAA,oBAMHb,QAAQ,CAAC,CAAD,CANL;AAAA;AAAA,MAMxBc,MANwB;AAAA,MAMhBC,SANgB;;AAQ/Bd,EAAAA,SAAS,CAAC,YAAM;AACde,IAAAA,UAAU;AACX,GAFQ,EAEN,EAFM,CAAT;;AAIA,MAAMA,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBC,IAAAA,KAAK,CAAC,oEAAD,CAAL,CACGC,IADH,CACQ,UAAAC,GAAG,EAAI;AACX,aAAO,CAACA,GAAG,CAACC,EAAL,GAAUD,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,UAAAI,CAAC;AAAA,eAAIC,OAAO,CAACC,MAAR,CAAeF,CAAf,CAAJ;AAAA,OAAjB,CAAV,GAAoDH,GAAG,CAACE,IAAJ,EAA3D;AACD,KAHH,EAIGH,IAJH,CAIQ,UAAAC,GAAG,EAAI;AACXd,MAAAA,MAAM,CAACc,GAAD,CAAN;AACA,aAAOA,GAAP;AACD,KAPH,EAQGD,IARH,CAQQ,UAAAd,GAAG;AAAA,aACPA,GAAG,CAACqB,GAAJ,CAAQ,UAAAC,EAAE;AAAA,eACRT,KAAK,sDAA+CS,EAA/C,WAAL,CACGR,IADH,CACQ,UAAAC,GAAG,EAAI;AACX,iBAAO,CAACA,GAAG,CAACC,EAAL,GACHD,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,UAAAI,CAAC;AAAA,mBAAIC,OAAO,CAACC,MAAR,CAAeF,CAAf,CAAJ;AAAA,WAAjB,CADG,GAEHH,GAAG,CAACE,IAAJ,EAFJ;AAGD,SALH,EAMGH,IANH,CAMQ,UAAAC,GAAG,EAAI;AACXZ,UAAAA,UAAU,CAAC,UAAAoB,SAAS;AAAA,gDAAQA,SAAR,IAAmBR,GAAnB;AAAA,WAAV,CAAV;AACD,SARH,EASGS,KATH,CASSC,OAAO,CAACC,GATjB,CADQ;AAAA,OAAV,CADO;AAAA,KARX,EAsBGF,KAtBH,CAsBSC,OAAO,CAACC,GAtBjB;AAuBD,GAxBD;;AA0BAD,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBxB,OAAvB;AAEAL,EAAAA,SAAS,CAAC,YAAM;AACdU,IAAAA,UAAU,CAACL,OAAO,CAACyB,KAAR,CAAcjB,MAAd,EAAsBA,MAAM,GAAG,EAA/B,CAAD,CAAV;AACAD,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAD,IAAAA,QAAQ,IAAIE,MAAM,GAAG,EAArB;AACD,GAJQ,EAIN,CAACF,QAAD,CAJM,CAAT;AAMA,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAP;AACD,CA/CD;;AAiDA,eAAeV,eAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst InfiniteStories = props => {\r\n  const [ids, setIds] = useState([]);\r\n  const [stories, setStories] = useState([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [visible, setVisible] = useState([]);\r\n  const [loadMore, setLoadMore] = useState(false);\r\n  const [lastId, setLastId] = useState(0);\r\n\r\n  useEffect(() => {\r\n    getStories();\r\n  }, []);\r\n\r\n  const getStories = () => {\r\n    fetch(\"https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\")\r\n      .then(res => {\r\n        return !res.ok ? res.json().then(e => Promise.reject(e)) : res.json();\r\n      })\r\n      .then(res => {\r\n        setIds(res);\r\n        return res;\r\n      })\r\n      .then(ids =>\r\n        ids.map(id =>\r\n          fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`)\r\n            .then(res => {\r\n              return !res.ok\r\n                ? res.json().then(e => Promise.reject(e))\r\n                : res.json();\r\n            })\r\n            .then(res => {\r\n              setStories(prevState => [...prevState, res]);\r\n            })\r\n            .catch(console.log)\r\n        )\r\n      )\r\n      .catch(console.log);\r\n  };\r\n\r\n  console.log(\"Stories\", stories);\r\n\r\n  useEffect(() => {\r\n    setVisible(stories.slice(lastId, lastId + 30));\r\n    setLoadMore(false);\r\n    loadMore && lastId + 30;\r\n  }, [loadMore]);\r\n\r\n  return <div>Hello</div>;\r\n};\r\n\r\nexport default InfiniteStories;\r\n"]},"metadata":{},"sourceType":"module"}