{"ast":null,"code":"import _taggedTemplateLiteral from \"C:\\\\Projects\\\\WealthSimple\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"C:\\\\Projects\\\\WealthSimple\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Projects\\\\WealthSimple\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Projects\\\\WealthSimple\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Projects\\\\WealthSimple\\\\src\\\\Components\\\\Stories\\\\InfiniteStories.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    bottom: 0;\\n    left: 50%;\\n    margin-left: -90px;\\n    pointer-events: auto;\\n    position: absolute;\\n    width: 180px;\\n    font-family: FuturaBT-Book, sans-serif;\\n    font-size: 18px;\\n    font-weight: 300;\\n    background: #ffb21a;\\n    border-radius: 52px;\\n    color: #fff;\\n    padding: 16px 20px 15px;\\n    text-decoration: none;\\n    transition: background 80ms linear, opacity 1s linear;\\n    white-space: nowrap;\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    background: linear-gradient(hsla(0, 0%, 100%, 0), #f9f8f6);\\n    height: 390px;\\n    margin-top: -370px;\\n    pointer-events: none;\\n    position: relative;\\n    text-align: center;\\n    z-index: 2;\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport urlMetadata from \"url-metadata\";\n\nvar InfiniteStories = function InfiniteStories(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      ids = _useState2[0],\n      setIds = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      stories = _useState4[0],\n      setStories = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      visible = _useState6[0],\n      setVisible = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loadMore = _useState8[0],\n      setLoadMore = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      lastId = _useState10[0],\n      setLastId = _useState10[1];\n\n  useEffect(function () {\n    getStories();\n  }, []);\n\n  var getStories = function getStories() {\n    var proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    fetch(\"https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\").then(function (res) {\n      return !res.ok ? res.json().then(function (e) {\n        return Promise.reject(e);\n      }) : res.json();\n    }).then(function (res) {\n      setIds(res);\n      return res;\n    }).then(function (ids) {\n      return ids.map(function (id) {\n        return fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(id, \".json\")).then(function (res) {\n          return !res.ok ? res.json().then(function (e) {\n            return Promise.reject(e);\n          }) : res.json();\n        }).then(function (res) {\n          urlMetadata(proxyurl + res.url).then(function (metadata) {\n            // success handler\n            console.log(\"Metada \", metadata[\"og:image\"]);\n\n            var story = _objectSpread({}, res, {\n              image: metadata[\"og:image\"]\n            });\n\n            setStories(function (prevState) {\n              return [].concat(_toConsumableArray(prevState), [story]);\n            });\n          }, function (error) {\n            // failure handler\n            setStories(function (prevState) {\n              return [].concat(_toConsumableArray(prevState), [res]);\n            });\n          });\n        }).catch(console.log);\n      });\n    }).catch(console.log);\n  };\n\n  useEffect(function () {\n    //   setVisible(stories.slice(lastId, lastId + 30));\n    loadMore && setLastId(lastId + 30);\n    setLoadMore(false);\n  }, [loadMore]);\n  var LoadMoreDiv = styled.div(_templateObject());\n  var Button = styled.div(_templateObject2());\n  console.log(\"LastId\", lastId);\n  return React.createElement(\"section\", {\n    className: \"mt-24\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    class: \"recent-posts js-load-more-posts-target js-macy-container\",\n    style: \"position: relative; height: 1284px;\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    class: \"recent-posts-post\",\n    style: \"width: calc(50% - 10px); position: absolute; top: 0px; left: 0px;\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"/en-ca/magazine/money-diary-sugar-ray-leonard\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"recent-post-image-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"https://wealthsimple-grow.ghost.io/content/images/2019/10/sugarrayleonard_finalartboard_1_copy_6-1.jpg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    class: \"post-excerpt\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    class: \"post-category\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Money Diaries\"), React.createElement(\"h3\", {\n    class: \"post-excerpt-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Boxing Legend \\u201CSugar\\u201D Ray Leonard Was Never a Fighter\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"He never wanted to be a professional boxer, he wanted to be a substitute teacher. Until his father got sick. The money story of the legendary five-time world champion, Olympic gold medalist, and one of the greatest pound-for-pound fighters in history.\")))), React.createElement(\"li\", {\n    class: \"recent-posts-post\",\n    style: \"width: calc(50% - 10px); position: absolute; top: 0px; left: calc(50% + 10px);\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"/en-ca/magazine/money-diary-matty-matheson\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"recent-post-image-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"https://wealthsimple-grow.ghost.io/content/images/2019/09/MattyM_final.jpg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    class: \"post-excerpt\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    class: \"post-category\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"Money Diaries\"), React.createElement(\"h3\", {\n    class: \"post-excerpt-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"The Path to Financial Freedom Is a Heart Attack: The Matty Matheson Story\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"He was 31 years old, an addict, and completely broke. How the chef and host of Viceland\\u2019s \\u2018Deadset on Life,\\u2019 got his act together and became a Toronto restaurant legend.\")))), React.createElement(\"li\", {\n    class: \"recent-posts-post\",\n    style: \"width: calc(50% - 10px); position: absolute; top: 666px; left: 0px;\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"/en-ca/magazine/money-diary-anastasia-soare\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"recent-post-image-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"https://wealthsimple-grow.ghost.io/content/images/2019/08/AnastasiaSoare_final_color-1.jpg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    class: \"post-excerpt\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    class: \"post-category\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, \"Money Diaries\"), React.createElement(\"h3\", {\n    class: \"post-excerpt-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"The Queen of the $3 Billion Eyebrow Empire\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"Anastasia Soare arrived in America with, literally, zero dollars. She believed in hard work, and that people should care about the hair above their eyeballs. This is the story of her and her eyebrows.\")))), React.createElement(\"li\", {\n    class: \"recent-posts-post\",\n    style: \"width: calc(50% - 10px); position: absolute; top: 638px; left: calc(50% + 10px);\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"/en-ca/magazine/money-diary-rachel-d-williams\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"recent-post-image-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"https://wealthsimple-grow.ghost.io/content/images/2019/08/Anna-Sorokin-Art-Final-1.jpg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    class: \"post-excerpt\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    class: \"post-category\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"Money Diaries\"), React.createElement(\"h3\", {\n    class: \"post-excerpt-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, \"How I was Conned by the \\u201CFake German Heiress\\u201D\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"Rachel DeLoache Williams\\u2019 relationship with Anna Delvey began over drinks and infrared saunas, but it ended with a $60,000 bill, a grand jury, and a new understanding of friendship and financial crime.\")))))), React.createElement(LoadMoreDiv, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(Button, {\n    href: \"#\",\n    \"data-category\": \"?category_id=money-diaries\",\n    onClick: function onClick() {\n      return setLoadMore(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"More posts\")));\n};\n\nexport default InfiniteStories;","map":{"version":3,"sources":["C:/Projects/WealthSimple/src/Components/Stories/InfiniteStories.js"],"names":["React","useState","useEffect","styled","urlMetadata","InfiniteStories","props","ids","setIds","stories","setStories","visible","setVisible","loadMore","setLoadMore","lastId","setLastId","getStories","proxyurl","fetch","then","res","ok","json","e","Promise","reject","map","id","url","metadata","console","log","story","image","prevState","error","catch","LoadMoreDiv","div","Button"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport urlMetadata from \"url-metadata\";\r\n\r\nconst InfiniteStories = props => {\r\n  const [ids, setIds] = useState([]);\r\n  const [stories, setStories] = useState([]);\r\n  const [visible, setVisible] = useState([]);\r\n  const [loadMore, setLoadMore] = useState(false);\r\n  const [lastId, setLastId] = useState(0);\r\n\r\n  useEffect(() => {\r\n    getStories();\r\n  }, []);\r\n\r\n  const getStories = () => {\r\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\n    fetch(\"https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty\")\r\n      .then(res => {\r\n        return !res.ok ? res.json().then(e => Promise.reject(e)) : res.json();\r\n      })\r\n      .then(res => {\r\n        setIds(res);\r\n        return res;\r\n      })\r\n      .then(ids =>\r\n        ids.map(id =>\r\n          fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`)\r\n            .then(res => {\r\n              return !res.ok\r\n                ? res.json().then(e => Promise.reject(e))\r\n                : res.json();\r\n            })\r\n            .then(res => {\r\n              urlMetadata(proxyurl + res.url).then(\r\n                function(metadata) {\r\n                  // success handler\r\n                  console.log(\"Metada \", metadata[\"og:image\"]);\r\n                  const story = { ...res, image: metadata[\"og:image\"] };\r\n                  setStories(prevState => [...prevState, story]);\r\n                },\r\n                function(error) {\r\n                  // failure handler\r\n                  setStories(prevState => [...prevState, res]);\r\n                }\r\n              );\r\n            })\r\n            .catch(console.log)\r\n        )\r\n      )\r\n      .catch(console.log);\r\n  };\r\n\r\n  useEffect(() => {\r\n    //   setVisible(stories.slice(lastId, lastId + 30));\r\n    loadMore && setLastId(lastId + 30);\r\n    setLoadMore(false);\r\n  }, [loadMore]);\r\n\r\n  const LoadMoreDiv = styled.div`\r\n    background: linear-gradient(hsla(0, 0%, 100%, 0), #f9f8f6);\r\n    height: 390px;\r\n    margin-top: -370px;\r\n    pointer-events: none;\r\n    position: relative;\r\n    text-align: center;\r\n    z-index: 2;\r\n  `;\r\n\r\n  const Button = styled.div`\r\n    bottom: 0;\r\n    left: 50%;\r\n    margin-left: -90px;\r\n    pointer-events: auto;\r\n    position: absolute;\r\n    width: 180px;\r\n    font-family: FuturaBT-Book, sans-serif;\r\n    font-size: 18px;\r\n    font-weight: 300;\r\n    background: #ffb21a;\r\n    border-radius: 52px;\r\n    color: #fff;\r\n    padding: 16px 20px 15px;\r\n    text-decoration: none;\r\n    transition: background 80ms linear, opacity 1s linear;\r\n    white-space: nowrap;\r\n  `;\r\n\r\n \r\n\r\n  console.log(\"LastId\", lastId);\r\n  return (\r\n    <section className=\"mt-24\">\r\n      <div>\r\n      <ul class=\"recent-posts js-load-more-posts-target js-macy-container\" style=\"position: relative; height: 1284px;\">\r\n    \r\n    <li class=\"recent-posts-post\" style=\"width: calc(50% - 10px); position: absolute; top: 0px; left: 0px;\">\r\n<a href=\"/en-ca/magazine/money-diary-sugar-ray-leonard\">\r\n  \r\n    <div class=\"recent-post-image-container\"><img src=\"https://wealthsimple-grow.ghost.io/content/images/2019/10/sugarrayleonard_finalartboard_1_copy_6-1.jpg\"/></div>\r\n  \r\n  <div class=\"post-excerpt\">\r\n    <span class=\"post-category\">Money Diaries</span>\r\n    <h3 class=\"post-excerpt-title\">Boxing Legend “Sugar” Ray Leonard Was Never a Fighter</h3>\r\n    <p>He never wanted to be a professional boxer, he wanted to be a substitute teacher. Until his father got sick. The money story of the legendary five-time world champion, Olympic gold medalist, and one of the greatest pound-for-pound fighters in history.</p>\r\n  </div>\r\n</a>\r\n</li>\r\n\r\n  \r\n    <li class=\"recent-posts-post\" style=\"width: calc(50% - 10px); position: absolute; top: 0px; left: calc(50% + 10px);\">\r\n<a href=\"/en-ca/magazine/money-diary-matty-matheson\">\r\n  \r\n    <div class=\"recent-post-image-container\"><img src=\"https://wealthsimple-grow.ghost.io/content/images/2019/09/MattyM_final.jpg\"/></div>\r\n  \r\n  <div class=\"post-excerpt\">\r\n    <span class=\"post-category\">Money Diaries</span>\r\n    <h3 class=\"post-excerpt-title\">The Path to Financial Freedom Is a Heart Attack: The Matty Matheson Story</h3>\r\n    <p>He was 31 years old, an addict, and completely broke. How the chef and host of Viceland’s ‘Deadset on Life,’ got his act together and became a Toronto restaurant legend.</p>\r\n  </div>\r\n</a>\r\n</li>\r\n\r\n  \r\n    <li class=\"recent-posts-post\" style=\"width: calc(50% - 10px); position: absolute; top: 666px; left: 0px;\">\r\n<a href=\"/en-ca/magazine/money-diary-anastasia-soare\">\r\n  \r\n    <div class=\"recent-post-image-container\"><img src=\"https://wealthsimple-grow.ghost.io/content/images/2019/08/AnastasiaSoare_final_color-1.jpg\"/></div>\r\n  \r\n  <div class=\"post-excerpt\">\r\n    <span class=\"post-category\">Money Diaries</span>\r\n    <h3 class=\"post-excerpt-title\">The Queen of the $3 Billion Eyebrow Empire</h3>\r\n    <p>Anastasia Soare arrived in America with, literally, zero dollars. She believed in hard work, and that people should care about the hair above their eyeballs. This is the story of her and her eyebrows.</p>\r\n  </div>\r\n</a>\r\n</li>\r\n\r\n  \r\n    <li class=\"recent-posts-post\" style=\"width: calc(50% - 10px); position: absolute; top: 638px; left: calc(50% + 10px);\">\r\n<a href=\"/en-ca/magazine/money-diary-rachel-d-williams\">\r\n  \r\n    <div class=\"recent-post-image-container\"><img src=\"https://wealthsimple-grow.ghost.io/content/images/2019/08/Anna-Sorokin-Art-Final-1.jpg\"/></div>\r\n  \r\n  <div class=\"post-excerpt\">\r\n    <span class=\"post-category\">Money Diaries</span>\r\n    <h3 class=\"post-excerpt-title\">How I was Conned by the “Fake German Heiress”</h3>\r\n    <p>Rachel DeLoache Williams’ relationship with Anna Delvey began over drinks and infrared saunas, but it ended with a $60,000 bill, a grand jury, and a new understanding of friendship and financial crime.</p>\r\n  </div>\r\n</a>\r\n</li>\r\n\r\n  \r\n</ul>\r\n      </div>\r\n      <LoadMoreDiv>\r\n        <Button\r\n          href=\"#\"\r\n          data-category=\"?category_id=money-diaries\"\r\n          onClick={() => setLoadMore(true)}\r\n        >\r\n          More posts\r\n        </Button>\r\n      </LoadMoreDiv>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default InfiniteStories;\r\n"]},"metadata":{},"sourceType":"module"}